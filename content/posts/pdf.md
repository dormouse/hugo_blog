---
title: "结合 Sphinx 与 xeTex 生成PDF"
date: 2013-01-27 21:42:37
lastmod: 2015-03-10 13:55:57
tags: ["sphinx","xetex", "pdf"]
categories: ["software"]
slug: "make-pdf-with-Sphinx-and-xeTex"
---

安装xeTex
---------

### 方法一：

没有测试过。 apt-get install texlive-full

### 方法二：

去 tex 的 [老家](http://www.tug.org/texlive/acquire-netinstall.html)
下载
[install-tl-unx.tar.gz](http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz)
。

解压缩后，运行:

    sudo ./install-tl --gui=wizard

如果没有安装 wget ，则运行:

    sudo yum install wget

安装输出大致如下:

    输入 “In” 开始安装，一共有2599个项目......
    Actions:
    <I> start installation to hard disk
    <H> help
    <Q> quit

    Enter command: i
    Installing to: /usr/local/texlive/2012
    Installing [0001/2599, time/total: ??:??/??:??]: 12many [376k]
    Installing [0002/2599, time/total: 00:09/10:05:07]: 2up [66k]
    Installing [0003/2599, time/total: 00:10/09:32:46]: Asana-Math [458k]
    Installing [0004/2599, time/total: 00:12/05:36:55]: ESIEEcv [137k]
    Installing [0005/2599, time/total: 00:15/06:05:39]: FAQ-en [5765k]
    ......

    See /usr/local/texlive/2012/index.html
    for links to documentation.  The TeX Live web site
    contains updates and corrections: http://tug.org/texlive.

    TeX Live is a joint project of the TeX user groups around the world;
    please consider supporting it by joining the group best for you. The
    list of user groups is on the web at http://tug.org/usergroups.html.


    Add /usr/local/texlive/2012/texmf/doc/man to MANPATH, if not dynamically determined.
    Add /usr/local/texlive/2012/texmf/doc/info to INFOPATH.

    Most importantly, add /usr/local/texlive/2012/bin/x86_64-linux
    to your PATH for current and future sessions.

设置路径，把以下内容放在 .bash\_profile 中，然后运行 .
\~/.bash\_profile(ubuntu 下是 \~/.bashrc):

    PATH=$PATH:$HOME/.local/bin:$HOME/bin
    PATH=/usr/local/texlive/2012/bin/x86_64-linux:$PATH; export PATH
    MANPATH=/usr/local/texlive/2012/texmf/doc/man:$MANPATH; export MANPATH
    INFOPATH=/usr/local/texlive/2012/texmf/doc/info:$INFOPATH; export INFOPATH

安装 Sphinx
-----------

使用如下命令安装:

    easy_install -U Sphinx

用 Sphinx 生成 PDF 文件
-----------------------

使用这个命令生成 tex 文件:

    make latex

把生成的 tex 文件的“title{XXX}”之前的开头部分替换为如下内容:

    % Generated by Sphinx.
    \def\sphinxdocclass{report}
    \documentclass[letterpaper,10pt,english]{sphinxmanual}
    \usepackage[T1]{fontenc}
    \usepackage{babel}
    \usepackage{times}
    \usepackage[Bjarne]{fncychap}
    \usepackage{longtable}
    \usepackage{sphinx}
    \usepackage{multirow}
    \usepackage{fontspec}     % 引入 fontsepc，這樣才可以用下面的設定字型的指令
    \setmainfont{文泉驿等宽微米黑}  % 預設字型
    \setsansfont{文泉驿等宽微米黑}  % sans family 字型
    \setromanfont{文泉驿等宽微米黑} % roman 字型
    \setmonofont{文泉驿等宽微米黑}  % 等寬字型
    \XeTeXlinebreaklocale "zh"          % 設定斷行演算法為中文
    \XeTeXlinebreakskip = 0pt plus 1pt  % 設定中文字距與英文字距

在 Linux 中可以用 fc-list 命令来获得字体名称。

运行 **两遍** 以下命令即可生成 PDF 文件:

    xelatex Test.tex
